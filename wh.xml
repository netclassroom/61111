<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="Google.com" />
<Content type="html"><![CDATA[


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Wrestle Bros ðŸŽ® Play Now on the Official Site</title>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/WrestleBros.js?th=716"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-9WFJGF6YNK', { cookie_flags: 'secure;samesite=none' });
    </script>


    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: #000;
            color: orange;
      overflow: hidden;
        }
        #openfl-content { background: #000; width: 100%; height: 100%; }
        #loading {
            position: absolute;
            z-index: 15;
            top: 60%;
            left: 50%;
            transform: translate(-50%, 0);
            background: #000;
            text-align: center;
        }
        #spinner {
            transform-origin: 50% 50%;
            width: 82px;
            height: 81px;
            animation: spin1 2s infinite linear;
        }
        .ad-unit {
            position: absolute !important;
            top: 30px;
            left: 30px;
            z-index: 100;
            overflow: hidden;
            visibility: hidden;
            text-align: center;
        }
        #preroll {
            width: 960px;
            height: 540px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            display: none;
        }
        @keyframes spin1 {
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <iframe src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/silence.mp3" allow="autoplay" id="audio" style="display: none"></iframe>
    <noscript>Enable JavaScript bro!</noscript>
    <div id="loading">
        <img src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/assets/loading4.png"><br>
        <img src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/assets/fbro.png">
        <img src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/assets/sbro.png">
        <img src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/assets/wbro.png">
        <img src="https://cdn.jsdelivr.net/gh/netclassroom/61111@main/assets/bbro.png">
    </div>
    <div id="game2" style="width: 100%; height: 100%;">
        <div id="openfl-content" style="width: 100%; float: left;">
            <script> lime.embed("WrestleBros", "openfl-content", 0, 0, { parameters: {} }); </script>
        </div>
        <div id="preroll"></div>
        <div id='wrestlebros-io_160x600' class='ad-unit' style='width: 160px; height: 600px;'></div><div id='wrestlebros-io_160x600_2' class='ad-unit' style='width: 160px; height: 600px;'></div><div id='wrestlebros-io_300x250' class='ad-unit' style='width: 300px; height: 250px;'></div><div id='wrestlebros-io_300x250_2' class='ad-unit' style='width: 300px; height: 250px;'></div><div id='wrestlebros-io_728x90' class='ad-unit' style='width: 728px; height: 90px;'></div><div id='wrestlebros-io_728x90_m' class='ad-unit' style='width: 728px; height: 90px;'></div><div id='wrestlebros-io_970x250' class='ad-unit' style='width: 970px; height: 250px;'></div><div id='wrestlebros-io_player_300x600' class='ad-unit' style='width: 300px; height: 600px;'></div><div id='wrestlebros-io_300x600_m' class='ad-unit' style='width: 300px; height: 600px;'></div><div id='wrestlebros.io_160x600_1_desktop' class='ad-unit' style='width: 160px; height: 600px;'></div><div id='wrestlebros.io_160x600_2_desktop' class='ad-unit' style='width: 160px; height: 600px;'></div><div id='wrestlebros.io_300x250_1_desktop' class='ad-unit' style='width: 300px; height: 250px;'></div><div id='wrestlebros.io_300x250_2_desktop' class='ad-unit' style='width: 300px; height: 250px;'></div><div id='wrestlebros.io_728x90_desktop' class='ad-unit' style='width: 728px; height: 90px;'></div><div id='wrestlebros.io_980x250_desktop' class='ad-unit' style='width: 980px; height: 250px;'></div>    </div>
    <div id="more">
        <div class="notch-top-left" style="--notch-color: var(--background-color)"></div>
        <div class="info-box">
            <h3>About Wrestle Bros</h3>
            <p>Body slam your bros in this free pro wrestling browser game from Blue Wizard! Play against friends online or wrestle the CPU to unlock new wrestlers and gear. Fly off the top rope, smash your opponent, or bounce off the ropes! Play online vs friends!</p>
            <p>Controls: Use arrow keys or WASD to move. Up arrow to jump, double jump to pin. Enter/Space to attack.</p>
            <p>Sign up for our newsletter for alt links and Wrestle Bros updates!</p>
        </div>
        <div class="info-box">
            <h3>FAQ</h3>
            <b>Why isn't the game loading?</b><p>Check your internet and ensure our site isn't blocked. Disable ad blockers.</p>
            <b>How do I play?</b><p>Hop in and start suplexing!</p>
            <b>Which browser should I use?</b><p>Use Chrome for guaranteed support. Firefox and Safari may work.</p>
            <b>Are there more Bros games?</b><p>Yes! Try <a href="https://footballbros.io">Football Bros</a>, <a href="https://soccerbros.gg">Soccer Bros</a>, and <a href="https://basketbros.io">Basket Bros</a>.</p>
        </div>
    </div>
    <div class="section">
        <div style="display: flex; flex-direction: row; flex-wrap: wrap; margin: 10px; padding: 2px; justify-content: center;">
            <div class="partner">
                <script>
                    function getPartner(y) {
                        const referrer = document.referrer;
                        const partners = {
                            'crazygames': '<a href="https://crazygames.com" target="_blank">Crazy Games</a>',
                            'iogames.space': '<a href="https://iogames.space" target="_blank">IO Games</a>',
                            'poki': 'Check out our friends at <a href="https://poki.com" target="_blank">Poki</a>',
                            'silver': '<a href="https://silvergames.com" target="_blank">Silver Games</a>',
                            'default': '<a href="https://freegames.io/game/wrestle-bros" target="_blank">Wrestle Bros at Freegames.io</a><br><a href="https://crazygames.com" target="_blank">Crazy Games</a>'
                        };
                        const key = Object.keys(partners).find(k => referrer.includes(k)) || (referrer ? 'default' : 'default');
                        return `<center><br><div style="transform: translate(-50px, ${y}px); width: 70%; z-index: 101; text-align: right;"><font style="font-weight: normal; font-family: Arial; color: #010101; font-size: 20px;">${partners[key]}</font><br></div></center>`;
                    }
                    document.write(getPartner(0));
                </script>
            </div>
        </div>
    </div>

    <script>
        const adProvider = 'setupad';
        const adUnitsConfig = {"wrestlebros-io_160x600":{"id":"wrestlebros-io_160x600","width":160,"height":600},"wrestlebros-io_160x600_2":{"id":"wrestlebros-io_160x600_2","width":160,"height":600},"wrestlebros-io_300x250":{"id":"wrestlebros-io_300x250","width":300,"height":250},"wrestlebros-io_300x250_2":{"id":"wrestlebros-io_300x250_2","width":300,"height":250},"wrestlebros-io_728x90":{"id":"wrestlebros-io_728x90","width":728,"height":90},"wrestlebros-io_728x90_m":{"id":"wrestlebros-io_728x90_m","width":728,"height":90},"wrestlebros-io_970x250":{"id":"wrestlebros-io_970x250","width":970,"height":250},"wrestlebros-io_player_300x600":{"id":"wrestlebros-io_player_300x600","width":300,"height":600},"wrestlebros-io_300x600_m":{"id":"wrestlebros-io_300x600_m","width":300,"height":600},"wrestlebros.io_160x600_1_desktop":{"id":"wrestlebros.io_160x600_1_desktop","width":160,"height":600,"setupad":true},"wrestlebros.io_160x600_2_desktop":{"id":"wrestlebros.io_160x600_2_desktop","width":160,"height":600,"setupad":true},"wrestlebros.io_300x250_1_desktop":{"id":"wrestlebros.io_300x250_1_desktop","width":300,"height":250,"setupad":true},"wrestlebros.io_300x250_2_desktop":{"id":"wrestlebros.io_300x250_2_desktop","width":300,"height":250,"setupad":true},"wrestlebros.io_728x90_desktop":{"id":"wrestlebros.io_728x90_desktop","width":728,"height":90,"setupad":true},"wrestlebros.io_980x250_desktop":{"id":"wrestlebros.io_980x250_desktop","width":980,"height":250,"setupad":true}};
        let lastRefresh = {};
        let msAdID;
        let rewardedAdSlot = null;
        let rewardedReadyEvent = null;

        function initPWA() {
            let deferredPrompt, testedPWA = false, canProcessPWA = false;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                canProcessPWA = true;
            });
            return function checkPWA() {
                if (testedPWA || typeof gCrazySDK !== 'undefined') return;
                testedPWA = true;
                if (window.matchMedia('(display-mode: standalone)').matches) {
                    SendEvent('event', 'in_pwa');
                } else if (canProcessPWA) {
                    SendEvent('event', 'not_in_pwa');
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((result) => {
                        console.log(result.outcome === 'accepted' ? 'User accepted PWA prompt' : 'User dismissed PWA prompt');
                    });
                } else {
                    SendEvent('event', 'pwa_not_installed');
                }
            };
        }
        const checkPWA = initPWA();

        function initEventListeners() {
            window.addEventListener('touchmove', (e) => e.preventDefault(), { capture: false, passive: false });
            window.addEventListener('keydown', (e) => {
                if ([32, 38, 40].includes(e.keyCode) && e.target === document.body) e.preventDefault();
            });
            if (window.devicePixelRatio > 2) {
                document.getElementById('viewport').setAttribute('content', `width=device-width, initial-scale=${2 / window.devicePixelRatio}, user-scalable=no`);
            }
//            ['openfl-content', 'more'].forEach(id => {
//                document.getElementById(id).addEventListener('wheel', (e) => window.scroll(0, window.scrollY + e.deltaY));
//            });
            if (adProvider !== 'ms') {
                document.addEventListener('aip_interstitialadavailable', () => console.log('Interstitial ad available'));
            }
        }

    function prepareRewardedAd() {
      if (adProvider !== 'setupad') return;
      if (rewardedAdSlot) {
        return;
      }
      googletag.cmd.push(() => {
        rewardedReadyEvent = null;
        rewardedAdSlot = googletag.defineOutOfPageSlot('/21743024831/wrestlebros.io_rewarded', googletag.enums.OutOfPageFormat.REWARDED);
        if (rewardedAdSlot) {
          rewardedAdSlot.addService(googletag.pubads());
          googletag.display(rewardedAdSlot);
          googletag.pubads().refresh([rewardedAdSlot]);
          SendEvent('event', 'setupad_video_preload_requested');
        }
      });
    }

    function initSetupadRewarded() {
      if (adProvider !== 'setupad') return;
      googletag.cmd.push(() => {
        googletag.pubads().addEventListener('rewardedSlotReady', (evt) => {
          if (evt.slot === rewardedAdSlot) {
            rewardedReadyEvent = evt;
            SendEvent('event', 'setupad_video_ready');
          }
        });
        googletag.pubads().addEventListener('rewardedSlotGranted', (evt) => {
          if (evt.slot === rewardedAdSlot) {
            Main.DoneVideoAd();
            SendEvent('event', 'setupad_reward_granted');
          }
        });
        googletag.pubads().addEventListener('rewardedSlotClosed', (evt) => {
          if (evt.slot === rewardedAdSlot) {
            Main.DoneVideoAd();
            SendEvent('event', 'setupad_reward_dismissed');
            googletag.destroySlots([evt.slot]);
            rewardedAdSlot = null;
            prepareRewardedAd();
          }
        });
        prepareRewardedAd();
      });
    }

    function HideSetupAds()
    {
      console.log("hiding ads");
      if (adProvider !== 'setupad') return;
      if (typeof stpd !== 'undefined') {
        stpd.que.push(() => {
          Object.keys(adUnitsConfig).forEach(id => {
            if (adUnitsConfig[id].setupad == true) 
            {
              stpd.terminateAdunit(id);
              const el = document.getElementById(id);
              if (el) {
                el.style.visibility = 'hidden';
                el.style.display = 'none';
                                el.innerHTML = '';
              }
            }
          });
        });
      }
    }

        function displayBannerAd(unitId, forceAip = false) {
            if (/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent) || !adUnitsConfig[unitId]) return;

      if(adProvider === 'setupad') { //let's translate
        unitId = translateAdUnit(unitId);
      }

      const { width, height, setupad } = adUnitsConfig[unitId];
            const minWidth = setupad ? (width === 160 ? 1500 : width === 300 ? 1200 : width === 728 ? 728 : 980) : (width === 300 && height === 600 ? 1200 : width);
            if (window.innerWidth < minWidth) return;

            const el = document.getElementById(unitId);
            if (!el) return;

            console.log(`ShowAd: ${unitId}`);
            el.style.visibility = 'visible';
            el.style.display = 'block';

            if (setupad && adProvider === 'setupad' && !forceAip && typeof stpd !== 'undefined') {
                
                if (typeof window.definedSlots === 'undefined') {
                    window.definedSlots = {};
                }
                var newSlotDefined = false;
                if (!window.definedSlots[unitId]) {
                    switch(unitId)
                    {
                        case 'wrestlebros.io_160x600_1_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[160,600],[120,600],[160,320],[120,240]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                        case 'wrestlebros.io_160x600_2_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[160,600],[120,600],[160,320],[120,240]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                        case 'wrestlebros.io_300x250_1_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[300,250],[250,250]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                        case 'wrestlebros.io_300x250_2_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[300,250],[250,250]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                        case 'wrestlebros.io_728x90_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[728,90],[468,60],[650,90],[320,80],[320,60],[320,50],[300,50]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                        case 'wrestlebros.io_980x250_desktop':
                            googletag.cmd.push(() => { googletag.defineSlot('/21743024831/'+unitId, [[980,250],[970,250],[980,240],[980,120],[970,90],[728,90],[970,200],[970,210],[950,90],[728,200],[728,250]], unitId).addService(googletag.pubads()); });
                            newSlotDefined = true;
                            break;
                    }
                    window.definedSlots[unitId] = true;
                }
                
              
                
                if (!lastRefresh[unitId] || Date.now() - lastRefresh[unitId] > 10000) {
                    googletag.cmd.push(() => {
                        googletag.display(unitId);
                        stpd.initializeAdUnit(unitId);
                    });
                    lastRefresh[unitId] = Date.now();
                    //if(newSlotDefined != true) refreshSetupadAds(unitId);
                    SendEvent('event', 'setupad_banner_shown');
                }
                else
                {
                    console.log("Too soon, not refreshing setupad unit");
                }
            } else if (!setupad && adProvider === 'ms' && !forceAip) {
                const position = width === 160 ? (unitId.includes('_2') ? 'left' : 'right') : (width === 300 && height === 600 ? 'right' : 'bottom');
                $msstart.showDisplayAdsAsync(`${position}:${width}x${height}`).then(() => {
                    SendEvent('event', 'ms_banner_shown');
                }).catch(() => {
                    SendEvent('event', 'ms_banner_nofill');
                    displayBannerAd(unitId, true);
                });
            } else if (!setupad && adProvider === 'crazygames') {
                const now = Date.now();
                if (!lastRefresh[unitId] || now - lastRefresh[unitId] > 10000) {
                    window.CrazyGames.SDK.banner.requestResponsiveBanner([unitId]);
                    lastRefresh[unitId] = now;
                }
            } else if (!setupad && typeof aipDisplayTag !== 'undefined') {
                aipDisplayTag.refresh(unitId);
                SendEvent('event', 'aip_banner_requested');
                if (adProvider === 'ms') SendEvent('event', 'ms_aip_banner_requested');
            } else {
                SendEvent('event', 'banner_adblocked');
            }

      
        }


    function translateAllDesktopAds() {

      translateAdUnit('wrestlebros-io_160x600', false);
      translateAdUnit('wrestlebros-io_160x600_2', false);
      translateAdUnit('wrestlebros-io_300x250', false);
      translateAdUnit('wrestlebros-io_300x250_2', false);
      translateAdUnit('wrestlebros-io_728x90', false);
      translateAdUnit('wrestlebros-io_970x250', false);
    }
    

    function translateAdUnit(unitId, doVis=true) {
      var div1 = document.getElementById(unitId);
      var newName = "";
      if(div1 === null) return unitId;
      
      switch(unitId) {
        case 'wrestlebros-io_160x600':
          newName = 'wrestlebros.io_160x600_1_desktop';
          break;
        case 'wrestlebros-io_160x600_2':
          newName = 'wrestlebros.io_160x600_2_desktop';
          break;
        case 'wrestlebros-io_300x250':
          newName =  'wrestlebros.io_300x250_1_desktop';
          break;
        case 'wrestlebros-io_300x250_2':
          newName =  'wrestlebros.io_300x250_2_desktop';
          break;
        case 'wrestlebros-io_728x90':
          newName =  'wrestlebros.io_728x90_desktop';
          break;
        case 'wrestlebros-io_970x250':
          newName =  'wrestlebros.io_980x250_desktop';
          break;
      }

      if(newName !== "") {
        div2 = document.getElementById(newName);
        if(doVis)
        {
          div2.style.visibility = div1.style.visibility;
          div2.style.display = div1.style.display;
        }
        div2.style.width = div1.style.width;
        div2.style.height = div1.style.height;
        div2.style.left = div1.style.left;
        div2.style.top = div1.style.top;

        return newName;
      }
      else
      {
        return unitId;
      }
    }

        function ShowAd1(forceaip) {
            loadVideo();
      displayBannerAd('wrestlebros-io_160x600', forceaip);
      displayBannerAd('wrestlebros-io_160x600_2', forceaip);
        }

        function ShowAd2(forceaip) {
      displayBannerAd('wrestlebros-io_300x250_2', forceaip);
        }

        function ShowAd3(forceaip) {
      displayBannerAd('wrestlebros-io_728x90', forceaip);
        }

        function ShowAd4(forceaip) {
      displayBannerAd('wrestlebros-io_player_300x600', forceaip);
        }

        function ShowAd6(forceaip) {
      displayBannerAd('wrestlebros-io_300x250', forceaip);
        }

        function ShowAd7(forceaip) {
      displayBannerAd('wrestlebros-io_300x600_m', forceaip);
        }

        function ShowAd8(forceaip) {
      displayBannerAd('wrestlebros-io_728x90_m', forceaip);
        }

        function ShowAd9(forceaip) {
      displayBannerAd('wrestlebros-io_970x250', forceaip);
        }

        function ShowVideo(unitName = null, forceAip = false) {
//            Main.DoneVideoAd();
//            return;
//            window.focus();
//            document.getElementById('openfl-content').focus();

//            return;
            if (/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)) {
                const preroll = document.getElementById('preroll');
                if (preroll) {
                    preroll.style.display = 'none';
                    preroll.style.visibility = 'hidden';
                }
                Main.DoneVideoAd();
                window.focus();
                document.getElementById('openfl-content').focus();
                return;
            }

            if (adProvider === 'setupad' && !forceAip && typeof stpd !== 'undefined') {
                if (rewardedReadyEvent) {
                    rewardedReadyEvent.makeRewardedVisible();
                    rewardedReadyEvent = null;
                    SendEvent('event', 'setupad_video_shown');
                } else {
                    Main.DoneVideoAd();
                    SendEvent('event', 'setupad_video_not_ready');
                }
            } else if (adProvider === 'ms' && !forceAip) {
                $msstart.showAdsAsync(msAdID).then(adInstance => {
                    adInstance.showAdsCompletedAsync.then(() => {
                        Main.DoneVideoAd();
                        window.focus();
                        document.getElementById('openfl-content').focus();
                        SendEvent('event', 'ms_video_shown2');
                        loadVideo();
                    }).catch(() => {
                        SendEvent('event', 'ms_video_not_completed');
                        loadVideo();
                    });
                }).catch(() => {
                    SendEvent('event', 'ms_video_show_error2');
                    loadVideo();
                    ShowVideo(unitName, true);
                });
            } else if (adProvider === 'crazygames') {
                window.CrazyGames.SDK.ad.requestAd('midgame', {
                    adFinished: () => Main.DoneVideoAd(),
                    adError: () => Main.DoneVideoAd(),
                    adStarted: () => console.log('Start midgame ad')
                });
                SendEvent('event', 'cgvideo');
            } else if (typeof adplayer === 'undefined') {
                Main.DoneVideoAd(true);
                SendEvent('event', 'video_adblocked');
            } else {
                const aStr = unitName || 'preroll';
                aiptag.cmd.player.push(() => adplayer.startPreRoll(aStr));
                SendEvent('event', 'startvideo-' + aStr);
            }
        }

        function initAdinPlay() {
            if (adProvider === 'crazygames') {
                window.gAdBlock = false;
                window.lastUnitPlayed = 'none';
                return;
            }
            window.aiptag = window.aiptag || { cmd: { display: [], player: [] } };
            aiptag.consented = false;
                        aiptag.cmd.player.push(() => {
                window.adplayer = new aipPlayer({
                    AIP_ADBREAK_COMPLETE: () => {
                        console.log('Adbreak Completed');
                        Main.DoneInterstitialAd(false);
                    },
                    AD_WIDTH: 960,
                    AD_HEIGHT: 540,
                    AD_DISPLAY: 'default',
                    TRUSTED: true,
                    LOADING_TEXT: 'loading advertisement',
                    PREROLL_ELEM: () => document.getElementById('preroll'),
                    AIP_COMPLETE: (state) => {
                        Main.DoneVideoAd();
                        window.focus();
                        document.getElementById('openfl-content').focus();
                        state = state || 'null';
                        console.log('Video Ad Complete: ' + state);
                        SendEvent('event', 'donevideo-' + (window.lastUnitPlayed || 'none') + '-' + state);
                    }
                });
            });
        }

        function loadVideo() {
            if (adProvider !== 'ms') return;
            $msstart.loadAdsAsync().then(adInstance => {
                msAdID = adInstance.instanceId;
                setupMSNotification();
            });
        }

        function setupMSNotification() {
            if (adProvider !== 'ms') return;
            const notifications = [
                { title: 'Unlock new bros now!', desc: 'You are just about to unlock a new Bro! Who will it be?', delay: 24 * 60 * 60 },
                { title: 'Get more bros!', desc: 'New bros just waiting to score goals for you!', delay: 24 * 7 * 60 * 60 }
            ];
            notifications.forEach(({ title, desc, delay }) => {
                $msstart.scheduleNotificationAsync({
                    title,
                    description: desc,
                    type: 1,
                    minDelayInSeconds: delay
                }).then(response => console.log('Notification response: ' + response));
            });
        }

        function initHeavyAdInterventionObserver() {
            if (typeof ReportingObserver === 'undefined') return;
            const observer = new ReportingObserver((reports, observer) => {
                for (const report of reports) {
                    if (report.type === 'intervention' && report.body.id === 'HeavyAdIntervention') {
                        console.log('Heavy ad intervention detected:', report.body.message);
                        SendEvent('event', 'heavy_ad_surpressed');

                        Main.DoneVideoAd();
                    }
                }
            }, { buffered: true });
            observer.observe();
        }

        function refreshSetupadAds(id) {
            if (adProvider !== 'setupad' || typeof stpd === 'undefined') return;
            stpd.que.push(() => {
                Object.keys(adUnitsConfig).forEach(id => {
                    if (adUnitsConfig[id].setupad) stpd.refreshAdUnit(id);
                });
            });
            SendEvent('event', 'setupad_banner_refreshed');
        }

        function showAdBreak() {
            if (adProvider === 'crazygames' || false || typeof adplayer === 'undefined') {
                Main.DoneInterstitialAd(false);
                return;
            }
            aiptag.cmd.player.push(() => adplayer.startAdBreak());
        }

        function setCGInviteLink() {
            if (adProvider !== 'crazygames') return;
            const meta = document.getElementById('cglink');
            if (!meta) return;
            const roomId = meta.value.slice(-8);
            meta.value = window.CrazyGames.SDK.game.inviteLink({ roomId });
            meta.select();
            document.execCommand('Copy');
            console.log('COPIED CG URL');
        }

        function EmailSignup() {
            if (document.getElementById('signup') || document.getElementById('deleteme')) return;
            const iframe = document.createElement('iframe');
            iframe.src = 'https://bluewizard.com/subscribe-to-bbros/';
            iframe.style.cssText = 'width: 550px; height: ' + (window.innerHeight - 100) + 'px; position: absolute; top: 50px; left: 50%; margin-left: -225px; max-width: 100%;';
            iframe.id = 'signup';
            document.body.appendChild(iframe);
        }

        function GamePlayStart() {
            if (adProvider === 'crazygames') {
                console.log('GamePlayStart');
                window.CrazyGames.SDK.game.gameplayStart();
            }
        }

        function GamePlayStop() {
            if (adProvider === 'crazygames') {
                console.log('GamePlayStop');
                window.CrazyGames.SDK.game.gameplayStop();
            }
        }

        function HappyTime() {
            if (adProvider === 'crazygames') {
                console.log('happytime');
                window.CrazyGames.SDK.game.happytime();
            }
        }

    var sid='8tqigv1dbuj8rmv86d4h1og72m'
    function updateStatus(fromEvent = false)
    {
      const req = new XMLHttpRequest();
      var aStr = "recordsession.php?s="+sid;
      if(fromEvent == true)  aStr = aStr + "&e=1"
      req.open("GET", aStr);
      req.send();
    }

    function SendEvent(theEvent, theAction, theParms = '') {
      if(theParms == '') {
        gtag(theEvent, theAction);
      } else {
        gtag(theEvent, theAction, theParms);
      }
      updateStatus(true);
      //console.log("Sending event: " + theEvent + "/" + theAction + "/" + theParms);
    }


        function periodicTasks() {
            window.scrollTo(0, 0);
        }

        initEventListeners();
        initAdinPlay();
        checkPWA();
        initSetupadRewarded();
        initHeavyAdInterventionObserver();
        setInterval(periodicTasks, 2000);
        updateStatus();

    </script>
</body>
</html>



]]></Content>
</Module>